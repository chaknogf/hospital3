<div class="card-detalle-paciente">
  <h2>ğŸ§â€â™‚ï¸ Detalle del Paciente</h2>

  <section>
    <h3>ğŸ†” Identificadores</h3>
    <p><strong>CUI:</strong> {{ patient.identificadores[0].valor || 'â€”' }}</p>
    <p><strong>Expediente:</strong> {{ patient.identificadores[1].valor || 'â€”' }}</p>
  </section>

  <section>
    <h3>ğŸ“› Nombre Completo</h3>
    <p>
      {{ patient.nombre.primer || '' }} {{ patient.nombre.segundo || '' }} {{ patient.nombre.otro || '' }}
      {{ patient.nombre.apellido_primero || '' }} {{ patient.nombre.apellido_segundo || '' }}
      <span *ngIf="patient.sexo === 'F' && patient.nombre.casada">de {{ patient.nombre.casada }}</span>
    </p>
  </section>

  <section>
    <h3>ğŸ—“ï¸ InformaciÃ³n BÃ¡sica</h3>
    <p><strong>Sexo:</strong> {{ patient.sexo === 'M' ? 'Masculino' : 'Femenino' }}</p>
    <p><strong>Fecha de Nacimiento:</strong> {{ patient.fecha_nacimiento | date:'longDate' }}</p>
  </section>

  <section *ngIf="(patient.contacto?.length ?? 0) > 0">
    <h3>ğŸ“ Contacto</h3>
    <ul>
      <li *ngFor="let c of patient.contacto">
        <strong>{{ c?.clave | titlecase }}:</strong> {{ c?.valor || 'â€”' }}
      </li>
    </ul>
  </section>

  <section *ngIf="patient.referencias?.length ?? 0">
    <h3>ğŸ‘¥ Referencias</h3>
    <ul>
      <li *ngFor="let r of patient.referencias">
        {{ r?.nombre || 'â€”' }} ({{ r?.parentesco || 'â€”' }}): {{ r?.telefono || 'â€”' }}
      </li>
    </ul>
  </section>

  <section *ngIf="patient.datos_extra?.length ?? 0">
    <h3>ğŸ“ Datos Extra</h3>
    <ul>
      <li *ngFor="let d of patient.datos_extra">
        <strong>{{ d?.tipo | titlecase }}:</strong> {{ d?.valor || 'â€”' }}
      </li>
    </ul>
  </section>

  <section>
    <h3>âš•ï¸ Estado</h3>
    <p>{{ patient.estado === 'V' ? 'ğŸŸ¢ Vivo' : 'âš« Fallecido' }}</p>
  </section>

  <section *ngIf="patient.metadatos?.length ?? 0">
    <h3>ğŸ“œ Historial de Actualizaciones</h3>
    <ul>
      <li *ngFor="let meta of patient.metadatos">
        {{ meta?.usuario || 'â€”' }} â€” <em>{{ meta?.registro | date:'short' }}</em>
      </li>
    </ul>
  </section>


</div>
