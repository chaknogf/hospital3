
<div class="card-detalle-paciente" *ngIf="paciente">
<div class="botones">
  <button type="button" (click)="regresar()">
    <span [innerHTML]="regresarIcon" >Regresar</span>
  </button>

</div>
  <h2><span [innerHTML]="personFicha"></span> Detalle del Paciente</h2>


  <!-- Identificadores -->
  <section class="section-dos">

    <div class="data-distribution">
      <h3>ðŸ†” Identificadores</h3>
      <div *ngIf="paciente?.cui" class="datos-detalle"><strong>CUI:</strong><p> {{ paciente.cui }}</p></div>
        <div *ngIf="paciente?.expediente" class="datos-detalle"><strong>Expediente:</strong><p> {{ paciente.expediente }} </p></div>
        <div *ngIf="paciente?.pasaporte" class="datos-detalle"><strong>Pasaporte:</strong> <p> {{ paciente.pasaporte }} </p></div>
        <div *ngIf="paciente?.otro" class="datos-detalle"><strong>Otro:</strong> <p>{{ paciente.otro }} </p></div>
      </div>
    <div class="data-distribution">
      <h3>ðŸªª Nombre Completo</h3>
      <div class="datos-detalle"> <p>
        {{ paciente.nombre.primer_nombre| titlecase }} {{ paciente.nombre.segundo_nombre | titlecase }} {{ paciente.nombre.otro_nombre | titlecase }}
        {{ paciente.nombre.primer_apellido | titlecase }} {{ paciente.nombre.segundo_apellido  | titlecase }}
        <span *ngIf="paciente.nombre.apellido_casada"> de {{ paciente.nombre.apellido_casada | titlecase }}</span> </p>
      </div>
    </div>
  </section>


  <!-- InformaciÃ³n BÃ¡sica -->
  <section class="section-dos">
    <div class="data-distribution">
      <h3>ðŸŽ‚ InformaciÃ³n BÃ¡sica</h3>
      <div class="datos-detalle"><strong>Sexo:</strong>
        <ng-container *ngIf="paciente.sexo === 'M'">
          Hombre
          <span [innerHTML]="manIcon">Masculino</span>
        </ng-container>
        <ng-container *ngIf="paciente.sexo === 'F'">
          Mujer
          <span [innerHTML]="womanIcon">Feminino</span>
        </ng-container>
      </div>
      <div class="datos-detalle svg-icon-on"><strong>Estado:</strong>
      <ng-container class="d-inline" *ngIf="paciente.estado === 'V'">
        Vivo
        <span [innerHTML]="heartIcon" class="svg-icon-on"> </span>

      </ng-container>
      <ng-container class="d-inline" *ngIf="paciente.estado === 'F'">
        Fallecido
        <span [innerHTML]="ghostIcon"> </span >
      </ng-container>
    </div>
      <div class="datos-detalle"><strong>Fecha de nacimiento:</strong> <p> {{ paciente.fecha_nacimiento | date: 'dd/MM/yyyy' }} </p> </div>
        <br>
      <div class="datos-detalle"><strong class="datos-detalle">Edad:</strong> <p> {{paciente.fecha_nacimiento | edad}} </p></div>
    </div>
    <div class="data-distribution">
      <h3>ðŸ“ž Contacto</h3>
      <div class="datos-detalle"><strong>DirecciÃ³n:</strong>
         <p>{{ paciente.contacto?.direccion }} </p>
         <p>{{ paciente.contacto?.municipio | datosExtra:'Municipio'}}</p>
        </div>

      <!-- <div class="datos-detalle"><strong>Municipio:</strong><p> {{ paciente.contacto?.municipio }}</p></div> -->
      <div class="datos-detalle"><strong>TelÃ©fonos:</strong>
        <p *ngIf="paciente.contacto?.telefono"> {{ paciente.contacto?.telefono }} </p>
        <p *ngIf="paciente.contacto?.telefono2">{{ paciente.contacto?.telefono2 }}</p>
        <p *ngIf="paciente.contacto?.telefono3"> {{ paciente.contacto?.telefono3 }}</p>
      </div>
    </div>
  </section>

  <!-- Referencias -->
<section *ngIf="referenciaKeys.length" class="section-n">
  <div class="data-distribution">
    <h3>ðŸ‘¥ Referencias</h3>
    <div class="datos-extra-grid-n">
      <div class="datos-extra" *ngFor="let refKey of referenciaKeys">
        <div class="datos-detalle">
          <strong class="label-data">Nombre:</strong>
          <p>{{ paciente.referencias?.[refKey]?.nombre || 'Sin dato' }}</p>
        </div>
        <div class="datos-detalle">
          <strong class="label-data">Parentesco:</strong>
          <p>{{ paciente.referencias?.[refKey]?.parentesco || 'No especificado' }}</p>
        </div>
        <div class="datos-detalle">
          <strong class="label-data">TelÃ©fono:</strong>
          <p>{{ paciente.referencias?.[refKey]?.telefono || 'No disponible' }}</p>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- Datos Extra -->
<section class="section-n">
  <div class="data-distribution" *ngIf="datosExtraKeys.length > 0 && paciente?.datos_extra">
    <h3>ðŸ“„ Datos Extra</h3>

    <!-- Grid contenedor -->
    <div class="datos-extra-grid">
      <div
        class="datos-extra"
        *ngFor="let refKey of datosExtraKeys"

      >
        <div class="datos-detalle">
          <p class="label-data">{{ convertirTipo(paciente.datos_extra?.[refKey]?.tipo) }}:</p>
          <p>
            {{
              (paciente.datos_extra?.[refKey]?.valor || '')
                | datosExtra:(paciente.datos_extra?.[refKey]?.tipo || '')
            }}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>


  <!-- Metadatos -->
  <section>
  <h3>ðŸ“Œ Metadatos</h3>
  <div class="metadatos-grid">
    <div class="datos-detalle-metadato" *ngFor="let key of metadatosKeys">

      <span>
        <p>
         {{ paciente.metadatos?.[key]?.usuario }}|{{ paciente.metadatos?.[key]?.registro | date: 'medium' }}
        </p>
       </span>
    </div>
  </div>
</section>


</div>
